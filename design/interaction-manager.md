# Interaction Manager 设计规范

> Canvas 下方的交互管理区域

## 概述

Interaction Manager 是 Toumo 的核心交互编辑区，包含两个视图：
1. **状态图** - 可视化状态机
2. **时间轴** - 关键帧时间线

---

## 整体布局

```
┌─────────────────────────────────────────────────────────────┐
│  ═══  拖拽手柄                                               │
├─────────────────────────────────────────────────────────────┤
│  [状态图]  [时间轴]                          🔍 100%  ⊕ ⊖   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                      内容区域                                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 头部工具栏

| 元素 | 说明 |
|------|------|
| 拖拽手柄 | 调整面板高度 |
| Tab 切换 | 状态图 / 时间轴 |
| 缩放控制 | 100% + 放大/缩小 |

---

## 状态图视图

可视化状态机，节点代表状态，连线代表过渡。

### 状态节点

```
┌─────────────┐
│  ● Idle     │
│  初始状态   │
└─────────────┘
```

| 属性 | 值 |
|------|-----|
| 尺寸 | 120 × 56 px |
| 圆角 | 8px |
| 背景 | `bg-surface` |
| 边框 | `border-default` |

### 节点状态

- **默认**: 灰色边框
- **选中**: `accent` 边框 + glow
- **初始状态**: 左侧绿色圆点标记

### 过渡连线

```
[Idle] ──── tap ────→ [Loading]
```

| 属性 | 值 |
|------|-----|
| 线宽 | 2px |
| 颜色 | `text-tertiary` |
| 箭头 | 三角形，6px |

### 触发器标签

- 位置: 连线中点
- 背景: `bg-elevated`
- 字号: 11px

---

## 时间轴视图

横向时间线，显示关键帧和过渡时长。

### 结构

```
时间刻度  0ms    200ms   400ms   600ms   800ms
          │       │       │       │       │
Idle      ●───────────────┤
Loading                   ●───────────────┤
Success                                   ●
```

### 时间刻度

- 间隔: 100ms
- 颜色: `text-muted`
- 字号: 10px

### 关键帧标记

- 形状: 圆形，8px
- 颜色: 对应状态色

### 过渡条

- 高度: 4px
- 颜色: `accent`
- 可拖拽调整时长

---

## 交互规范

### 拖拽调整高度

- 拖拽手柄: 顶部 8px 区域
- 光标: `ns-resize`
- 最小/最大高度限制

### 画布操作

- 平移: 空格 + 拖拽
- 缩放: Cmd + 滚轮

### 节点操作

- 选中: 单击
- 移动: 拖拽
- 连接: 从节点边缘拖出
